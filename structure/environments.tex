%---------------------------------------------------------------------------------------
%	THEOREM STYLES
%---------------------------------------------------------------------------------------

% For math equations, theorems, symbols, etc
\usepackage{
    amsmath,
    amsfonts,
    amssymb,
    amsthm
}

\newcommand{\intoo}[2]{\mathopen{]}#1\,;#2\mathclose{[}}
\newcommand{\ud}{\mathop{\mathrm{{}d}}\mathopen{}}
\newcommand{\intff}[2]{\mathopen{[}#1\,;#2\mathclose{]}}
\newtheorem{notation}{Notation}[chapter]

\makeatletter
% Boxed/framed environments
\newtheoremstyle{ocrenumbox}% % Theorem style name
{0pt}% Space above
{0pt}% Space below
{\normalfont}% % Body font
{}% Indent amount
{\small\bf\sffamily\color{ocre}}% % Theorem head font
{\;}% Punctuation after theorem head
{0.25em}% Space after theorem head
% Theorem text (e.g. Theorem 2.1)
{
    \small
    \sffamily
    \color{ocre}
    \thmname{#1}
    \nobreakspace
    \thmnumber{
        \@ifnotempty{#1}{}\@upn{#2}
    }
    % Optional theorem note
    \thmnote{
        \nobreakspace
        \the\thm@notefont
        \sffamily
        \bfseries
        \color{black}---\nobreakspace#3.
    }
}
% Optional QED square
\renewcommand{\qedsymbol}{$\blacksquare$}

\newtheoremstyle{blacknumex}% Theorem style name
{5pt}% Space above
{5pt}% Space below
{\normalfont}% Body font
{} % Indent amount
{\small\bf\sffamily}% Theorem head font
{\;}% Punctuation after theorem head
{0.25em}% Space after theorem head
% Theorem text (e.g. Theorem 2.1)
{
    \small\sffamily{
        \tiny\ensuremath{\blacksquare}
    }\nobreakspace\thmname{#1}\nobreakspace\thmnumber{
        \@ifnotempty{#1}{}\@upn{#2}
    }
    % Optional theorem note
    \thmnote{
        \nobreakspace
        \the\thm@notefont
        \sffamily
        \bfseries---\nobreakspace#3.
    }
}

\newtheoremstyle{blacknumbox} % Theorem style name
{0pt}% Space above
{0pt}% Space below
{\normalfont}% Body font
{}% Indent amount
{\small\bf\sffamily}% Theorem head font
{\;}% Punctuation after theorem head
{0.25em}% Space after theorem head
% Theorem text (e.g. Theorem 2.1)
{
    \small
    \sffamily
    \thmname{#1}
    \nobreakspace
    \thmnumber{
        \@ifnotempty{#1}{}\@upn{#2}
    }
    % Optional theorem note
    \thmnote{
        \nobreakspace
        \the\thm@notefont
        \sffamily
        \bfseries---\nobreakspace#3.
    }
}

% Non-boxed/non-framed environments
\newtheoremstyle{ocrenum}% % Theorem style name
{5pt}% Space above
{5pt}% Space below
{\normalfont}% % Body font
{}% Indent amount
{\small\bf\sffamily\color{ocre}}% % Theorem head font
{\;}% Punctuation after theorem head
{0.25em}% Space after theorem head
{
    \small
    \sffamily
    \color{ocre}
    \thmname{#1}
    \nobreakspace
    % Theorem text (e.g. Theorem 2.1)
    \thmnumber{
        \@ifnotempty{#1}{}\@upn{#2}
    }
    % Optional theorem note
    \thmnote{
        \nobreakspace
        \the\thm@notefont
        \sffamily
        \bfseries
        \color{black}---\nobreakspace#3.
    }
} 
% Optional QED square
\renewcommand{\qedsymbol}{$\blacksquare$}
\makeatother

% Defines the theorem text style for each type of theorem to one of the three styles above
\newcounter{dummy} 
\numberwithin{dummy}{section}
\newcounter{axiom}
\theoremstyle{ocrenumbox}
\newtheorem{theoremeT}[dummy]{Theorem}
\newtheorem{problem}{Problem}[chapter]
\newtheorem{exerciseT}{Exercise}[chapter]
\newtheorem{axiomT}{Axiom}[axiom]
\theoremstyle{blacknumex}
\newtheorem{exampleT}{Example}[chapter]
\theoremstyle{blacknumbox}
\newtheorem{definitionT}{Definition}[section]
\newtheorem{corollaryT}[dummy]{Corollary}
\newtheorem{lemmaT}[dummy]{Lemma}
\theoremstyle{ocrenum}
\newtheorem{propositionT}[dummy]{Proposition}

%---------------------------------------------------------------------------------------
%	DEFINITION OF COLORED BOXES
%---------------------------------------------------------------------------------------

% Required for creating the theorem, definition, exercise and corollary boxes
\RequirePackage[framemethod=default]{mdframed}

% Theorem box
\newmdenv[
    skipabove=7pt,
    skipbelow=7pt,
    backgroundcolor=black!5,
    linecolor=ocre,
    innerleftmargin=5pt,
    innerrightmargin=5pt,
    innertopmargin=5pt,
    leftmargin=0cm,
    rightmargin=0cm,
    innerbottommargin=5pt
]{tBox}

% Exercise box	  
\newmdenv[
    skipabove=7pt,
    skipbelow=7pt,
    rightline=false,
    leftline=true,
    topline=false,
    bottomline=false,
    backgroundcolor=ocre!10,
    linecolor=ocre,
    innerleftmargin=5pt,
    innerrightmargin=5pt,
    innertopmargin=5pt,
    innerbottommargin=5pt,
    leftmargin=0cm,
    rightmargin=0cm,
    linewidth=4pt
]{eBox}	

% Definition box
\newmdenv[
    skipabove=7pt,
    skipbelow=7pt,
    rightline=false,
    leftline=true,
    topline=false,
    bottomline=false,
    linecolor=ocre,
    innerleftmargin=8pt,
    innerrightmargin=0pt,
    innertopmargin=0pt,
    leftmargin=0cm,
    rightmargin=0cm,
    linewidth=4pt,
    innerbottommargin=0pt
]{dBox}	

% Corollary box
\newmdenv[
    skipabove=7pt,
    skipbelow=7pt,
    rightline=false,
    leftline=true,
    topline=false,
    bottomline=false,
    linecolor=gray,
    backgroundcolor=black!5,
    innerleftmargin=5pt,
    innerrightmargin=5pt,
    innertopmargin=5pt,
    leftmargin=0cm,
    rightmargin=0cm,
    linewidth=4pt,
    innerbottommargin=5pt
]{cBox}

% Creates an environment for each type of theorem and assigns it a theorem text style from the "Theorem Styles" section above and a colored box from above
\newenvironment{theorem}{
    \begin{tBox}
        \begin{theoremeT}
}{
        \end{theoremeT}
    \end{tBox}
}
\newenvironment{proposition}{
    \begin{tBox}
        \begin{propositionT}
}{
        \end{propositionT}
    \end{tBox}
}
\newenvironment{exercise}{
    \begin{eBox}
        \begin{exerciseT}
}{
            \hfill{
                \color{ocre}
                \tiny
                \ensuremath{\blacksquare}
            }
        \end{exerciseT}
    \end{eBox}
}	
\newenvironment{axiom}{
    \begin{dBox}
        \begin{axiomT}
}{
        \end{axiomT}
    \end{dBox}
}				  
\newenvironment{definition}{
    \begin{dBox}
        \begin{definitionT}
}{
        \end{definitionT}
    \end{dBox}
}	
\newenvironment{example}{
    \begin{exampleT}
}{
        \hfill{
            \tiny
            \ensuremath{\blacksquare}
        }
    \end{exampleT}
}		
\newenvironment{corollary}{
    \begin{cBox}
        \begin{corollaryT}
}{
        \end{corollaryT}
    \end{cBox}
}	
\newenvironment{lemma}{
    \begin{cBox}
        \begin{lemmaT}
}{
        \end{lemmaT}
    \end{cBox}
}	

%---------------------------------------------------------------------------------------
%	REMARK ENVIRONMENT
%---------------------------------------------------------------------------------------

\newenvironment{remark}{
    % Vertical white space above the remark and smaller font size
    \par
    \vspace{10pt}
    \small
    \begin{list}{}{
        \leftmargin=35pt % Indentation on the left
        \rightmargin=25pt
    }
        % Indentation on the right
        \item\ignorespaces 
        \makebox[-2.5pt]{
            \begin{tikzpicture}[overlay]
                \node[
                    draw=ocre!60,
                    line width=1pt,
                    circle,
                    fill=ocre!25,
                    font=\sffamily\bfseries,
                    inner sep=2pt,
                    outer sep=0pt
                ] at (-15pt,0pt){
                    \textcolor{ocre}{R}
                };
            \end{tikzpicture}
        } % Orange R in a circle
        \advance\baselineskip -1pt
}{ % Tighter line spacing and white space after remark
    \end{list}\vskip5pt
}

%---------------------------------------------------------------------------------------